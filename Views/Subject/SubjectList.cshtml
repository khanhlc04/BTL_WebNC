@using System.Linq
@using System.Collections.Generic
@{
    ViewData["Title"] = "Danh sách môn học";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var subjects = ViewBag.Subjects as IEnumerable<BTL_WebNC.Models.Subject.SubjectModel> ?? Enumerable.Empty<BTL_WebNC.Models.Subject.SubjectModel>();
}

<style>
    .toolbar-container {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 20px;
    }
    .controls-stack {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .control-row {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 8px;
    }
</style>

<h2>Danh sách môn học</h2>

<form asp-action="Index" method="get">
    <div class="toolbar-container">
        <div class="controls-stack">

            <div class="control-row">
                <span>Tìm kiếm:</span>
                <input type="text" name="searchString" value="@ViewData["CurrentFilter"]" class="form-control d-inline-block w-auto" />
                @* <input type="submit" value="Lọc" class="btn btn-primary" />  *@
            </div>

            @* <div class="control-row">
                <span>Sắp xếp theo:</span>
                <select name="sortOrder" class="form-select d-inline-block w-auto" onchange="this.form.submit()">
                    <option value="name_asc"  selected="@(currentSort == "name_asc" || string.IsNullOrEmpty(currentSort))">Tên A-Z</option>
                    <option value="name_desc" selected="@(currentSort == "name_desc")">Tên Z-A</option>
                    <option value="id_asc"    selected="@(currentSort == "id_asc")">ID Tăng dần</option>
                    <option value="id_desc"   selected="@(currentSort == "id_desc")">ID Giảm dần</option>
                </select>
            </div> *@

        </div>
    </div>
</form>

<div class="subject-grid">
    @if (subjects != null && subjects.Any())
    {
        foreach (var item in subjects)
        {
            <a class="subject-card" href="@Url.Action("Details", "Subject", new { id = item.Id })">
                <h4>@item.Name</h4>
                <p class="muted">@item.Description</p>
            </a>
        }
    }
    else
    {
        <div class="text-center">Không có dữ liệu phù hợp.</div>
    }
</div>

<style>
    .subject-grid { display:flex; flex-wrap:wrap; gap:16px; }
    .subject-card { background:#fff; border-radius:8px; padding:16px; box-shadow:0 2px 8px rgba(0,0,0,0.06); text-decoration:none; color:inherit; flex:1 1 calc(25% - 16px); min-width:220px; }
    .subject-card h4 { margin:0 0 8px 0; }
    .subject-card .muted { color:#666; font-size:14px; }
    @@media (max-width:768px) { .subject-card { flex:1 1 100%; } }
</style>